
# 附加任务提示词：审查作者原始 GitHub 代码中的工程优化方法

> **用途** ：本段提示词用于交给 Codex / AI 代码审查助手，帮助系统性检查作者原始复现代码中，是否已经使用或隐含使用了与我们讨论过的工程优化方法。

---

## 一、审查任务背景（请完整阅读）

你正在审查的是一篇**经典专利相似度 / 知识溢出指标论文**的作者 GitHub 复现代码。

### 现实复现背景

* 论文使用了 **美国约 170 年的专利数据（总量约 900 万）**
* 当前复现者使用的是 **中国 40 年专利数据（约 600 万）**
* 在直接按论文公式实现后，遇到了严重的工程瓶颈：
  * 稀疏矩阵乘法产生天量候选（`df_T × df_Y` 爆炸）
  * 单机时间 / 空间不可承受

为了解决该问题，复现者在工程上系统性引入了若干**向量剪枝 / 候选削减**方法，希望确认：

> **这些方法是否在作者原始代码中已经被使用（显式或隐式），从而确保工程改动不违背论文原意。**

---

## 二、你需要重点检查的代码形式

* 作者仓库中的代码主要为 **MATLAB / Octave（.m）文件**
* 可能存在以下结构：
  * 稀疏矩阵构造（`sparse`, `spalloc`, `nnz`）
  * 分年 / 分期处理
  * TF-IDF / TF-BIDF / cosine / dot-product 相似度计算

请你  **不要求逐行解释算法正确性** ，而是聚焦：

> **是否存在“工程层面削减计算规模”的处理逻辑** 。

---

## 三、需要重点审查的四类工程优化（核心任务）

请在代码中系统性查找并判断：

### 1️⃣ 是否存在「高 df 词 / 停用词」处理

重点关注以下模式：

* 是否有代码：
  * 统计每年 / 每期每个词的 `df`
  * 删除 / 忽略 / 屏蔽高频词
* 是否存在：
  * stopword 列表
  * hard threshold（如 `df > α·N`）
  * 仅保留低 df 词

关键词线索（示例）：

```
stopword
high frequency
common words
remove words
filter vocabulary
```

并请判断：

* 这是  **纯文本预处理** ，还是 **明确为降低相似度计算规模**

---

### 2️⃣ 是否存在「按文档 Top-K 词」的截断

请重点检查：

* 是否在构造文档向量后：
  * 只保留每篇文档中权重最大的 K 个词
  * 或显式丢弃权重很小的词

关键词线索：

```
TopK
largest K
sort weights
truncate vector
threshold tfidf
```

并判断：

* 这是为了 **数值稳定性 / 噪声控制**
* 还是明确为了 **减少相似度计算候选规模**

---

### 3️⃣ 是否存在「候选生成剪枝，而非全矩阵乘法」

请检查是否存在以下逻辑：

* 没有直接计算完整的 `M_T * M_Y'`
* 而是：
  * 通过倒排索引 / term-based accumulation
  * 仅对共享词项的文档对累加相似度

关键词线索：

```
inverted index
posting list
accumulate scores
for each term
```

并判断：

* 是否存在对“潜在相似度上界”的剪枝

---

### 4️⃣ 是否存在「分块 / 分年 + 对称性」优化

请检查：

* 是否明确只计算 `(t, y)` 一次，并复用到 `(y, t)`
* 是否使用 block-wise / chunk-wise 计算避免内存爆炸

关键词线索：

```
block
chunk
for t < y
reuse
symmetry
```

---

## 四、你需要输出的审查结论格式（非常重要）

请按以下结构给出结论：

### A. 明确存在的优化（Yes / No + 证据）

* 优化类型
* 对应代码文件
* 关键代码片段或逻辑描述
* 该优化的 **工程目的判断** （降噪 vs 降复杂度）

### B. 模糊 / 隐含存在的优化

* 是否通过变量命名 / 注释暗示
* 是否可能是作者默认假设

### C. 明确不存在、但在工程上“必需”的优化

* 指出作者代码中 **完全没有出现** ，但现实复现中几乎不可避免的优化
* 说明：
  * 作者是否可能依赖 HPC / 集群
  * 或依赖未公开的数据预处理

### D. 总体判断

请给出一个明确结论：

> **复现者采用以下工程优化（高 df 删词 / Top-K / 倒排剪枝等）是否“合理且不违背论文精神”？**

并简要说明理由。

---

## 五、重要提醒（请严格遵守）

* 本审查任务 **不是** 要你否定或重写论文算法
* 而是判断：

> **论文中未明说、但作者在代码中是否已经隐含做了工程级削减**

你的结论将直接影响复现者是否放心采用这些方法。

---

> 请开始审查代码，并严格按以上结构输出结果。
>
